<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=marathon, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 제1회 DW 마라톤 참가자 리스트
      /*
        no : 마라톤 등번호
        participant : 참가자
        isComplete : 마라톤 완주 여부 (true : 완주, false: 미완주)
        type : 마라톤 코스
        records : 완주 기록
       */
      const marathonList = [
        {
          no: 300,
          participant: '현상원',
          isComplete: false,
          type: 'half marathon',
          records: 'null',
        },
        {
          no: 400,
          participant: '류근환',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:35:00',
        },
        {
          no: 410,
          participant: '강인석',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:37:20',
        },
        {
          no: 500,
          participant: '유영준',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:40:15',
        },
        {
          no: 201,
          participant: '이승섭',
          isComplete: true,
          type: 'half marathon',
          records: '2022-04-01 13:31:45',
        },
        {
          no: 555,
          participant: '홍준호',
          isComplete: false,
          type: 'half marathon',
          records: 'null',
        },
        {
          no: 777,
          participant: '이정배',
          isComplete: true,
          type: 'half marathon',
          records: 'null',
        },
      ];
      /*
        1. half marathon에 참여한 참가자는 총 몇 명인지 구하고 출력하시오.
        2. 완주하지 못한 참가자의 이름과 등번호를 출력하시오.
        3. 완주는 했는데 기록이 없는 참가자의 이름과 등번호를 출력하시오.
        4. 완주한 사람 중 가장 기록이 좋은 참가자의 이름과 등번호를 출력하시오.
        (마라톤 시작 시간은 '2022-04-01 13:00:00' 입니다.)
        5. 완주한 사람들의 평균 기록을 구하고 출력하시오.
        (단, 기록이 null인 사람은 제외)
      */

      console.log(marathonList);

      //for-each사용
      var count = 0;
      marathonList.forEach((element) => {
        if (element.type === 'half marathon') {
          ++count;
        }
      });
      console.log('1번문제 for-each.');
      console.log('하프마라톤에 참가자는 총 ' + count + '명 입니다.');

      //2번 문제. 완주하지 못한 참가자의 이름과 등번호를 출력하시오.
      console.log(' ');
      console.log('2번문제 for-each.');

      marathonList.forEach((element) => {
        if (!element.isComplete) {
          console.log(
            '등번호는 ' + element.no + ', 이름은 ' + element.participant,
          );
        }
      });
      //3번 문제. 완주는 했는데 기록이 없는 참가자의 이름과 등번호를 출력하시오.
      console.log(' ');
      console.log('3번문제 for-each.');

      marathonList.forEach((element1) => {
        if (element1.isComplete && element1.records === 'null') {
          console.log(
            '이름은 ' + element1.participant + ', 등번호는 ' + element1.no,
          );
        }
      });

      /* 4. 완주한 사람 중 가장 기록이 좋은 참가자의 이름과 등번호를 출력하시오.
        (마라톤 시작 시간은 '2022-04-01 13:00:00' 입니다.)
      var min = 0;
      var temp = 0;
      marathonList.forEach((firstTime) => {
        if (firstTime.records !== 'null' && !firstTime.isComplete) {
          var time = new Date(firstTime.records).getTime() - lap;
          if (min > time) {
            min = time;
          }
        }
      });
      console.log(' ');
      console.log('4번문제 for-each.');
      console.log(max);*/

      //5번문제.5. 완주한 사람들의 평균 기록을 구하고 출력하시오. (단, 기록이 null인 사람은 제외)
      console.log(' ');
      console.log('5번문제 for-each.');

      var startTime = '2022-04-01 13:00:00';
      var lap = new Date(startTime).getTime();
      var result5 = 0;
      var sum = 0;
      var avg = 0;
      marathonList.forEach((item) => {
        if (item.isComplete && item.records !== 'null') {
          var time = new Date(item.records).getTime();
          ++result5;
          sum += time - lap;
        }
        avg = sum / result5 / (1000 * 60);
      });
      console.log(avg);
    </script>
  </body>
</html>
